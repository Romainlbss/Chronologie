@page "/"
@using Class

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<section class="experience pt-100 pb-100" id="experience">
		<div class="container">
			<div class="row">
				<div class="col-xl-8 mx-auto text-center">
					<div class="section-title">
						<h4>bootstrap 5 timeline</h4>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
					</div>
				</div>
			</div>
			<div class="row">
               <div class="col-xl-12">
                  <ul class="timeline-list">
                     <!-- Single Experience -->
                     <li>
                        <div class="timeline_content">
                           <span>2008</span>
                           <h4>Intern Developer span</h4>
                           <p>We gather your business and products information. We then determine the direction of the project and understand your goals and we combine your ideas with ours for an amazing website.</p>
                        </div>
                     </li>
                     <!-- Single Experience -->
                     <li>
                        <div class="timeline_content">
                        <span>2007-2012</span>
                           <h4>Junior Developer</h4>
                           <p>We gather your business and products information. We then determine the direction of the project and understand your goals and we combine your ideas with ours for an amazing website.</p>
                        </div>
                     </li>
                     <!-- Single Experience -->
                     <li>
                        <div class="timeline_content">
                        <span>2012-2015</span>
                           <h4>Senior Developer</h4>
                           <p>We gather your business and products information. We then determine the direction of the project and understand your goals and we combine your ideas with ours for an amazing website.</p>
                        </div>
                     </li>
                     <!-- Single Experience -->
                     <li>
                        <div class="timeline_content">
                        <span>2015-2018</span>
                           <h4>Project Manager</h4>
                           <p>We gather your business and products information. We then determine the direction of the project and understand your goals and we combine your ideas with ours for an amazing website.</p>
                        </div>
                     </li>
                     @foreach(Event e in listEvents)
                     {
                        <li>
                            <div class="timeline_content">
                                <i class=@GetIcon></i>
                                <span>@e.EventDate.ToString("yyyy MM")</span>
                                   <h4>@e.Title</h4>
                                   <p>We gather your business and products information. We then determine the direction of the project and understand your goals and we combine your ideas with ours for an amazing website.</p>
                            </div>
                        </li>
                     }
                  </ul>
               </div>
            </div>
		</div>
	  </section>

@code {
    List<Event>? listEvents = null;
    public string errorMessage = "";

    public string GetIcon(string category)
    {
        return category switch
        {
            "famille" => "fa-solid fa-child-reaching",
            "voyage" => "fa-solid fa-suitcase-rolling",
            "etudes/metiers" => "fa-solid fa-graduation-cap",
            "sante" => "fa-solid fa-heart-pulse",
            _ => "fa-solid fa-calendar",
        };
    }

    public string GetIconColor(string category)
    {
        return category switch
        {
            "famille" => "#ADE1E5",
            "voyage" => "#E5D0E3",
            "etudes/metiers" => "#0081A7",
            "sante" => "#99D19C",
            _ => "#CCCCCC", // Couleur par défaut si la catégorie est inconnue
        };
    }

    protected override void OnInitialized()
    {
        try
        {
            listEvents = Event.GetListEvents();
        }
        catch (Exception ex)
        {
            errorMessage = ex.Message;
        }
    }
}
