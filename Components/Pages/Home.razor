@page "/"
@using Class

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<section class="experience pt-100 pb-100" id="experience">
		<div class="container">
			<div class="row">
               <div class="col-xl-12">
                  <ul class="timeline-list">
                     @foreach(Event e in listEvents)
                     {
                        <li>
                            <div class="timeline_content">
                                <i class=@GetIcon(e.Category)></i>
                                <span>@e.EventDate.ToString("yyyy MM")</span>
                                   <h4>@e.Title</h4>
                                   <p>@e.Description</p>
                            </div>
                        </li>
                     }
                  </ul>
               </div>
            </div>
		</div>
	  </section>

@code {
    List<Event>? listEvents = null;
    public string errorMessage = "";

    public string GetIcon(string category)
    {
        return category switch
        {
            "famille" => "fa-solid fa-child-reaching",
            "voyage" => "fa-solid fa-suitcase-rolling",
            "etudes/metiers" => "fa-solid fa-graduation-cap",
            "sante" => "fa-solid fa-heart-pulse",
            _ => "fa-solid fa-calendar",
        };
    }

    public string GetIconColor(string category)
    {
        return category switch
        {
            "famille" => "#ADE1E5",
            "voyage" => "#E5D0E3",
            "etudes/metiers" => "#0081A7",
            "sante" => "#99D19C",
            _ => "#CCCCCC", // Couleur par défaut si la catégorie est inconnue
        };
    }

    protected override void OnInitialized()
    {
        try
        {
            listEvents = Event.GetListEvents();
        }
        catch (Exception ex)
        {
            errorMessage = ex.Message;
        }
    }
}
